<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>readme</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="README_files/libs/clipboard/clipboard.min.js"></script>
<script src="README_files/libs/quarto-html/quarto.js"></script>
<script src="README_files/libs/quarto-html/popper.min.js"></script>
<script src="README_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="README_files/libs/quarto-html/anchor.min.js"></script>
<link href="README_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="README_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="README_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="README_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="README_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="README_files/libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="README_files/libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="welcome-to-the-repository-of-my-personal-webpage" class="level1">
<h1>Welcome to the Repository of My Personal Webpage!</h1>
<section id="how-did-i-customize-the-styling-of-my-personal-quarto-based-webpage" class="level2">
<h2 class="anchored" data-anchor-id="how-did-i-customize-the-styling-of-my-personal-quarto-based-webpage">How Did I Customize the Styling of My Personal Quarto-based Webpage?</h2>
<p>Quarto offers great default options to build a website, with some nicely pre-designed themes and layouts. However, when it comes to customizing it according to your own styles and ideas, I found myself very quickly diving into CSS, HTML, and JavaScript code.</p>
<p>Since I didn`t know anything about these languages, I figured out most of the things by trial &amp; error and by consulting LLMs (ChatGPT, Claude or Perplexity). In hindsight, I would probably recommend to my younger self to do a short introduction course, especially on CSS and HTML.</p>
<p>Since I still don’t know much about these languages, I tried to document as much as possible to avoid getting lost again. The following is a list of the things I found worth noting down during the process of customizing my webpage.</p>
<p>Because my coding is probably still far from elegant, I’m happy to receive any tips, tricks, and suggestions for improvement.</p>
</section>
<section id="selectively-ignoring-content-for-rendering" class="level2">
<h2 class="anchored" data-anchor-id="selectively-ignoring-content-for-rendering">Selectively Ignoring Content for Rendering</h2>
<p>In my root directory, I have one folder named <code>x_not_published</code> where I store unfinished content and notes that are not yet ready for publication. To explicitly exclude the given folder with the stuff I don’t want rendered, I added <code>- "!x_not_published/"</code> under the <code>project:render:</code> in the <code>_quarto.yml</code> file.</p>
</section>
<section id="layout-fonts-and-colors" class="level2">
<h2 class="anchored" data-anchor-id="layout-fonts-and-colors">Layout, Fonts and Colors</h2>
<section id="page-layout-widths-of-margins-sidebars" class="level3">
<h3 class="anchored" data-anchor-id="page-layout-widths-of-margins-sidebars">Page Layout, Widths of Margins/ Sidebars</h3>
<p>In <code>_quarto.yml</code>, <code>grid:</code> with <code>sidebar-width: 200px</code> etc. defines the dimensions , however, only the ones on the “HOME”-page. The layouts of the other subpages (PUBLICATIONS; TALKS, BLOG) are defined in <code>styles_publications.css</code>, <code>styles_talks.css</code> and <code>styles_blog.css</code> within <code>.quarto-listing { ... }</code>. See further info below.</p>
</section>
<section id="background-color" class="level3">
<h3 class="anchored" data-anchor-id="background-color">Background Color</h3>
<ul>
<li>To apply the background color universally on the whole webpage, I used <code>backgroundcolor: "#f8f8f6"</code> in the <code>_quarto.yml</code>-file in the root folder. Alternatively one could also define it in the <code>styles.css</code> file using <code>background-color: #f8f8f6!important;</code> within <code>body {}</code>. Additionally the background color of the <code>page-footer</code> can also be set in the same file (<code>_quarto.yml</code>) using <code>background: "#f8f8f6"</code>.</li>
<li>Important: (matching) background colors for <code>R</code> plots need to be set in the corresponding <code>R</code>-code of the figure itself, e.g.&nbsp;in the <code>theme()</code> of the <code>ggplot</code>-figure.</li>
<li>to make sure a newly set background color applies properly, or in general other styling: delete <code>_site</code> folder in the root and render the page again.</li>
</ul>
</section>
<section id="customize-individual-subpages" class="level3">
<h3 class="anchored" data-anchor-id="customize-individual-subpages">Customize Individual Subpages</h3>
<p>The webpage and each subpage can be customized/ formatted using <code>.css</code> and <code>.ejs</code> (embedded java script) files. In these files you define things like the size, the font and color of your titles, subtitles, links, etc., the width and position of your text body and everything else you want to customize according to your own ideas.</p>
<p>For each subpage I created a separate<code>.css</code> and/ or <code>.ejs</code> file. These files need to be referenced in the yaml-header of the corresponding <code>index.qmd</code> file, using e.g.&nbsp;<code>css: styles.css</code>.</p>
<ul>
<li><strong>HOME</strong>-subpage: in the <code>styles.css</code> file located in the root folder, I’ve defined specific styles for titles, subtitles, and other elements (social links, “About Me”-Arrow) used on the HOME subpage. Also it includes globally applicable styles such as for the appearance of <code>R</code> code and output, as well as definitions of vertical spacing to enhance readability, e.g.&nbsp;in blog posts. The file needs to be referenced in the <code>index.qmd</code> file in the root directory.</li>
<li><strong>ABOUT</strong>-subpage: has a separate style file <code>about/styles_about.css</code>, which also must be referenced in the <code>about.qmd</code> file using <code>css: styles_about.css</code>.</li>
<li><strong>PUBLICATIONS/ TALKS</strong>-subpages:
<ul>
<li>on these sites, all of my publications and talks are listed based on a “listing”-layout. Instead of using one of the three <a href="https://quarto.org/docs/websites/website-listings.html#:~:text=By%20default%2C%20listings%20will%20appear,provides%20a%20traditional%20tabular%20layout.">Quarto built-in types of listings</a>, I customized the display of the items using <code>.ejs</code> files (ejs = embedded java script). See further info below.</li>
<li>the <code>.ejs</code> files are saved in the folder <code>_ejs</code> in <code>publications/</code> and <code>talks/</code>, respectively.</li>
<li>the style, fonts and colors of the overview listing pages are defined in <code>publications/styles_publications.css</code> and <code>talks/styles_talks.css</code>.</li>
</ul></li>
<li><strong>BLOG</strong>-subpage: here I created two separate style files: <code>styles_blog.css</code> for the overview blog page, and <code>styles_blog_individualc.css</code> containing definitions for the separate/ individual blog posts. The files are referenced in the <code>blog/index.qmd</code> and in each of the blogs posts <code>index.qmd</code> files by <code>css: "../styles_blog_individual.css"</code>.</li>
</ul>
</section>
<section id="customized-listing-layout-publications-talks" class="level3">
<h3 class="anchored" data-anchor-id="customized-listing-layout-publications-talks">Customized Listing Layout (Publications, Talks)</h3>
<p>Quarto offers 3 types of <a href="https://quarto.org/docs/websites/website-listings.html#:~:text=By%20default%2C%20listings%20will%20appear,provides%20a%20traditional%20tabular%20layout.">built-in listings</a>. However, none of these fit my needs for the publications and talks sites of my webpage. Therefore, I built a <a href="https://quarto.org/docs/websites/website-listings-custom.html">custom display listing</a> using <code>.ejs</code> templates. <code>.ejs</code> stands for embedded java script, and these files offer a possbility to loop through a list of files and display them all in the same mamner. These files are located under <code>publications/_ejs/pulbications.ejs</code> and <code>talks/_ejs/talks.ejs</code>. I did not build these files from scratch but rather browsed through the <a href="https://quarto.org/docs/gallery/#websites">quarto gallery</a> and let myself inspire by different websites and looked up the underlying code, and used support from LLMs (ChatGPT, Claude and Perplexity).</p>
<p>Here are few things I want to point out for the styling of the publications listing layout:</p>
<p>The <strong>category filter buttons</strong> at the top of the Publications subpage: The styling of those buttons is defined in <code>styles_publications.css</code> and the buttons and the corresponding filter functionality are implemented in the <code>ejs</code>-template <code>_ejs/publications.ejs</code>.</p>
<p>In the <code>ejs</code>-template <code>_ejs/publications.ejs</code> I added a function to <strong>bold my own name in the author list</strong> of each publication.</p>
<p>The <strong>HTML/ PDF-icons</strong> for linking the underlying HTML or PDF file of the talks are included, for pdf for example:</p>
<pre><code>&lt;a href="&lt;%- item.pdf %&gt;"&gt;
&lt;p style="color:#FA2FBD;"&gt;PDF &lt;i class="bi bi-filetype-pdf"&gt;&lt;/i&gt;&lt;/p&gt;
&lt;/a&gt;</code></pre>
<p>Please note that these links (PDF, HTML) are thereby embedded with fixed styling. As a result, modifying link styles in the <code>.css</code> file will not affect these specific links. More items and their codes can be found here: <a href="https://icons.getbootstrap.com/">https://icons.getbootstrap.com/</a></p>
</section>
<section id="references-in-blog-posts" class="level3">
<h3 class="anchored" data-anchor-id="references-in-blog-posts">References in Blog Posts</h3>
<p>In the blog posts I want the references in the text to show the whole citation only by hovering over it, but without an automatic reference list at the end of the document - which is normally achieved by using <code>suppress-bibliography: true</code> in the yaml-header. However, as soon as using <code>suppress-bibliography: true</code> in the YAML-header, the citation hover functionality does not work anymore. Therefore, I removed the <code>suppress-bibliography: true</code> from the meta-data, and I instead included a corresponding definition in the <code>styles_blog_individual.css</code>:</p>
<pre><code>#quarto-bibliography {
  display: none;
}

#quarto-appendix {
  background-color: #FBFAF9!important; 
  border-color: #FBFAF9!important;
}</code></pre>
<p>I found the names of the attributes - <code>#quarto-bibliography</code> and <code>#quarto-appendix</code> - by inspecting the site, which shows the raw html-code underneath. By disabling only the <code>#quarto-bibliography</code> and not the whole <a href="https://quarto.org/docs/authoring/appendices.html">Quarto Appendix</a> (<code>#quarto-appendix</code>), footnotes and attribution information would still show, in case there are any. Since the <a href="https://quarto.org/docs/authoring/appendices.html">Quarto Appendix</a> somehow still appears as a white box, I managed to hide it by matching its color to the website`s background color.</p>
</section>
<section id="possiblity-to-comment-on-blog-posts" class="level3">
<h3 class="anchored" data-anchor-id="possiblity-to-comment-on-blog-posts">Possiblity to Comment on Blog-Posts</h3>
<p>Quarto enables <a href="https://quarto.org/docs/output-formats/html-basics.html#commenting">commenting</a> via 3 options. I decided to go with <a href="https://utteranc.es/">Utterances</a> commenting for my blog posts. To do so, first, I needed to make my Webpage_Quarto repository public. Second, I installed the utterances app on the repo. Third, I added a <code>_metadata.yml</code> file with the following lines of codes:</p>
<pre><code>comments:
  utterances:
    repo: serigra/Webpage_Quarto</code></pre>
<p>To make sure that the comments are only allowed for the individual blog posts, but not on the overview blog page, I added <code>comments: false</code> in metadata of the file <code>blog/index.qmd</code>.</p>
</section>
</section>
<section id="general" class="level2">
<h2 class="anchored" data-anchor-id="general">General</h2>
<section id="inspect-your-wepage" class="level3">
<h3 class="anchored" data-anchor-id="inspect-your-wepage">Inspect your Wepage</h3>
<p>To customize very specific elements of your webpage using CSS - for instance I wanted to suppress the References section at the end of my blog posts (see further down) - you first need to identify the exact name of that element. These identifiers, known as <a href="https://www.w3schools.com/css/css_selectors.asp"><em>CSS selectors</em></a>, can be found by inspecting the underlying HTML code (right click -&gt; Inspect).</p>
</section>
<section id="vertical-spacing" class="level3">
<h3 class="anchored" data-anchor-id="vertical-spacing">Vertical Spacing</h3>
<p>Adjusting vertical spacing between paragraphs and images in a document can enhance its overall appearance and readability. Todo so in a quarto document, one option is using <code>&lt;br&gt;</code>, which, however results in quite a large space.<br>
To allow for more flexibility in choosing various spacing options, I added some functionalities in <code>styles.css</code>, such as:</p>
<pre><code>.small-space {
  margin-bottom: 1em; 
}</code></pre>
</section>
<section id="icons" class="level3">
<h3 class="anchored" data-anchor-id="icons">Icons</h3>
<section id="font-awesome-icons-extension-for-quarto" class="level4">
<h4 class="anchored" data-anchor-id="font-awesome-icons-extension-for-quarto">Font Awesome Icons Extension for Quarto</h4>
<p>Follow the instructions here: <a href="https://github.com/quarto-ext/fontawesome#readme">https://github.com/quarto-ext/fontawesome#readme</a></p>
</section>
<section id="academicons" class="level4">
<h4 class="anchored" data-anchor-id="academicons">Academicons</h4>
<p>To be able to use non-built-in <a href="https://jpswalsh.github.io/academicons/">“academicons”</a>–&gt; navigate to your root folder of your webpage and install the extension in the particular project:</p>
<p>In terminal:</p>
<pre><code>cd 07_Webpage_Quarto     
quarto install extension schochastics/academicons</code></pre>
<p>This adds a new folder <code>_extensions/stochastics/academicons</code> in the root folder of the quarto (webpage) project.</p>
<p>Example to add Icon:</p>
<pre><code>- text: ""      
  aria-label: ResearchGate
  href: https://www.researchgate.net/profile/Sereina-Graber</code></pre>
</section>
<section id="icons-in-the-.ejs-files" class="level4">
<h4 class="anchored" data-anchor-id="icons-in-the-.ejs-files">Icons in the .ejs files</h4>
<p>For icons embedded in the .ejs files (e.g.&nbsp;pdf, html or link item): look up code here <a href="https://icons.getbootstrap.com/">https://icons.getbootstrap.com/</a></p>
</section>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>